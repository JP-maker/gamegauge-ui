<div class="form-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Mot de passe oublié</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <!-- Messages de succès/erreur -->
      <div *ngIf="message" class="alert alert-success mb-3 p-2 text-center" style="color: green; background: #e8f5e9; border-radius: 4px;">
        {{ message }}
      </div>
      <div *ngIf="error" class="alert alert-danger mb-3 p-2 text-center" style="color: red; background: #ffebee; border-radius: 4px;">
        {{ error }}
      </div>

      <p class="text-secondary small mb-3 text-center">
        Entrez votre adresse email pour recevoir un lien de réinitialisation.
      </p>

      <form [formGroup]="forgotForm" (ngSubmit)="onSubmit()">
        
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" type="email" placeholder="votre.email@example.com">
          <mat-error *ngIf="forgotForm.get('email')?.hasError('required')">L'email est requis.</mat-error>
          <mat-error *ngIf="forgotForm.get('email')?.hasError('email')">Format d'email invalide.</mat-error>
        </mat-form-field>

        <button mat-raised-button color="primary" type="submit" class="w-100 mt-2" [disabled]="forgotForm.invalid || isLoading">
          <mat-progress-spinner *ngIf="isLoading" mode="indeterminate" diameter="20" color="accent" style="display:inline-block; margin-right:5px"></mat-progress-spinner>
          <span *ngIf="!isLoading">Recevoir le lien</span>
          <span *ngIf="isLoading">Envoi...</span>
        </button>

      </form>
    </mat-card-content>

    <mat-card-actions class="justify-content-center mt-3">
      <a routerLink="/login" style="text-decoration: none; font-size: 0.9rem;">
        Retour à la connexion
      </a>
    </mat-card-actions>
  </mat-card>
</div>